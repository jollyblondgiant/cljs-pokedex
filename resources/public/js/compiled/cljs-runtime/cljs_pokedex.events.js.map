{"version":3,"sources":["cljs_pokedex/events.cljs"],"mappings":"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","names":["re_frame.core.reg_event_db","_","cljs-pokedex.db/default-db","cljs-pokedex.events/region-map","p__26972","vec__26973","cljs.core.nth","db","region","c__26224__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__26225__auto__","switch__26201__auto__","state_26996","state_val_26997","inst_26976","p1__26971#","p2__26970#","inst_26977","inst_26978","inst_26979","inst_26980","inst_26981","inst_26982","inst_26983","inst_26984","inst_26985","cljs.core/PersistentHashMap","inst_26986","inst_26987","inst_26988","cljs.core.async.impl.ioc-helpers/take!","inst_26990","inst_26991","cljs.core/PersistentVector","inst_26992","inst_26993","inst_26994","cljs.core.async.impl.ioc-helpers/return-chan","statearr-27001","state-machine__26202__auto__","ret-value__26203__auto__","result__26204__auto__","cljs.core/keyword-identical?","ex__26205__auto__","e27002","statearr-27003","cljs.core/seq","statearr-27004","cljs.core/first","state__26226__auto__","statearr-27005","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs.core.reduce","vec__26998","start","stop","cljs.core.into","cljs.core.range","cljs.core/rand-nth","cljs_http.client.get","re-frame.core/dispatch","cljs.core.assoc","p__27006","vec__27007","map__27010","cljs.core/--destructure-map","map__27011","cljs.core.get","map__27012","sprite","num","name","pokemon","p__27013","vec__27014","input","js/console.log","guess","cljs.core._EQ_","clojure.string/lower-case","cljs.core.conj","p__27017","vec__27018","cljs.core.dissoc","p__27021","vec__27022","p__27026","vec__27027","p1__27025#","cljs.core.filter","cljs.core.not_EQ_","cljs.core/set"],"sourcesContent":["(ns cljs-pokedex.events\n  (:require-macros [cljs.core.async.macros :refer [go]])\n  (:require\n   [re-frame.core :as re-frame :refer [dispatch]]\n   [cljs-pokedex.db :as db]\n   [cljs-http.client :as http]\n   [cljs.core.async :refer [<!]]\n   [clojure.string :refer [lower-case]]\n   ))\n\n(re-frame/reg-event-db\n ::initialize-db\n (fn [_ _]\n   db/default-db))\n\n(def region-map\n  {:kanto  '(1   152)\n   :johto  '(152 252)\n   :hoenn  '(252 387)\n   :sinnoh '(387 494)\n   :unova  '(494 650)\n   :kalos  '(650 722)\n   :alola  '(722 810)\n   :galar  '(810 899)\n   :all    '(1   899)})\n\n(re-frame/reg-event-db\n ::new-pokemon\n (fn [db [_ region]]\n   (go (let [num (->> db :regions\n                      (reduce #(let [[start stop] (region-map %2)]\n                                 (into %1 (range start stop)))\n                              '()) rand-nth)\n             response\n             (<! (http/get\n                  (str \"https://pokeapi.co/api/v2/pokemon/\" num)\n                  {:with-credentials? false\n                   :headers {\"Content-Type\" \"application/json\"}}))]\n         (dispatch [::new-pokemon-resp response])))\n   (-> db\n       (assoc :sprite :pending))))\n\n(re-frame/reg-event-db\n ::new-pokemon-resp\n (fn [db [_ {{{sprite :front_default} :sprites\n              num :id\n              name :name :as pokemon} :body}]]\n   (-> db\n       (assoc\n        :pokemon {:sprite sprite :name name :num num}\n        :sprite sprite\n        :guess :pending))))\n\n(re-frame/reg-event-db\n ::input-guess\n (fn [db [_ input]]\n   (js/console.log \"updating guess \" input)\n   (assoc db :guess-input input)))\n\n(re-frame/reg-event-db\n ::guess-pokemon\n (fn [db _]\n   (let [guess (:guess-input db)]\n     (if (= (lower-case guess) (-> db :pokemon :name))\n       (assoc db :guess true\n              :caught (conj (:caught db) (:pokemon db)))\n       (assoc db :guess false :strikes (-> db :strikes dec))))))\n\n(re-frame/reg-event-db\n ::input-login\n (fn [db [_ input]]\n   (assoc db :login input)))\n\n(re-frame/reg-event-db\n ::login-trainer\n (fn [db _]\n   (-> db\n       (assoc :trainer (:login db))\n       (dissoc :login))))\n\n(re-frame/reg-event-db\n ::add-region\n (fn [db [_ region]]\n   (js/console.log \"adding region... \" region)\n   (js/console.log \"to regions...\" (:regions db))\n   (assoc db :regions (conj (:regions db) region))))\n\n(re-frame/reg-event-db\n ::remove-region\n (fn [db [_ region]]\n   (->> db\n        :regions\n        (filter #(not= % region))\n        set (assoc db :regions))\n   ))\n"]}